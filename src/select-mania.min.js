/*! select-mania v1.4 */
!function(e){var a={defaults:{width:"100%",size:"medium",themes:[],placeholder:"Select an item",removable:!1,empty:!1,search:!1,ajax:!1,data:{},scrollContainer:null,zIndex:null,hidden:!1},setup:function(t){var n=Object.keys(this.defaults),i=!0;Object.keys(t).forEach(function(a){-1===e.inArray(a,n)&&(console.error("selectMania | wrong setup settings"),i=!1)}),i&&(this.defaults=e.extend(!0,{},a.defaults,t))}},t={internalSettings:function(e,a){return a.multiple=!1,a.values=[],a.multiple=e.is("[multiple]"),a.disabled=e.is("[disabled]"),e.find("option:selected").each(function(){a.values.push({value:this.value,text:this.text})}),a},getAttrSettings:function(e){var a={};return["width","size","placeholder","removable","empty","search","scrollContainer","zIndex","hidden"].forEach(function(t){if(e.is("[data-"+t+"]")){var n=e.attr("data-"+t);"true"!==n&&"false"!==n||(n="true"===n),a[t]=n}}),a},initialize:function(a,t){var l=this,s=e.extend(!0,{},t),o=l.getAttrSettings(a);if((s=e.extend(s,o)).empty&&a.val(""),s=l.internalSettings(a,s),l.controlSettings(a,s)){var c=n.build(a,s);c.data("selectMania-originalSelect",a),a.data("selectMania-element",c),!1!==s.ajax&&l.initAjax(c,s),l.updateClean(c),a.addClass("select-mania-original"),c.insertBefore(a),a.appendTo(c),i.bind(c)}},update:function(a){var t=a.data("selectMania-element"),l=t.find(".select-mania-values").first(),s=t.data("selectMania-dropdown").find(".select-mania-items").first();a.is("[disabled]")?t.addClass("select-mania-disabled"):t.removeClass("select-mania-disabled"),t.find(".select-mania-value").remove(),s.empty(),a.find("option:selected").each(function(){e(this).is(":selected")&&l.append(n.buildValue({value:this.value,text:this.text}))}),s.append(n.buildItemList(a.children())),this.updateClean(t),i.bind(t)},destroy:function(e){var a=e.data("selectMania-element"),t=a.data("selectMania-dropdown");e.insertAfter(a),t.remove(),a.remove(),e.removeClass("select-mania-original")},openDropdown:function(a){var n=a.closest(".select-mania");if(n.is("[data-selectMania-scrollContainer]")){var l=e(n.attr("data-selectMania-scrollContainer"));t.positionDropdown(a),a.addClass("select-mania-absolute"),l.off("scroll.selectMania").on("scroll.selectMania",function(){l.off("scroll.selectMania"),t.closeDropdown(e(".select-mania-dropdown.open"))}),e(window).off("resize.selectMania").on("resize.selectMania",function(){t.positionDropdown(a)})}a.stop().addClass("open").slideDown(100),a.find(".select-mania-items").scrollTop(0),this.focusSearch(a),e(document).off("keydown.selectMania").on("keydown.selectMania",i.keyboardControl)},closeDropdown:function(a){var t=a.data("selectMania-element");if(e(document).off("keydown.selectMania"),a.find(".select-mania-item").removeClass("select-mania-hover"),a.hasClass("select-mania-absolute")){var n=a.data("selectMania-element").find(".select-mania-inner").first();a.removeClass("open").hide().insertAfter(n),e(window).off("resize.selectMania");var i=e(t.attr("data-selectMania-scrollContainer"));i.length>0&&i.off("scroll.selectMania")}else a.stop().removeClass("open").slideUp(100)},positionDropdown:function(e){var a=e.data("selectMania-element"),t=e.find(".select-mania-items"),n=t.scrollTop(),i=a.offset(),l=a.outerWidth(),s=a.outerHeight();e.appendTo("body").css({position:"absolute",top:i.top+s,left:i.left,width:l}),t.scrollTop(n)},selectItem:function(e){var a=e.closest(".select-mania-dropdown"),l=a.data("selectMania-element"),s=l.data("selectMania-originalSelect");if(!e.is(".select-mania-selected")){var o=e.attr("data-value"),c=n.buildValue({value:o,text:e.text()});l.is(".select-mania-multiple")?(l.find(".select-mania-values").append(c),t.addMultipleVal(s,o)):(a.find(".select-mania-item").removeClass("select-mania-selected"),l.find(".select-mania-values .select-mania-value").remove(),l.find(".select-mania-values").append(c),s.val(o)),e.addClass("select-mania-selected"),s.trigger("change")}a.is(".select-mania-absolute")&&t.positionDropdown(a),l.is(".select-mania-multiple")||t.closeDropdown(a),t.updateClean(l),i.bind(l)},focusSearch:function(e){e.find(".select-mania-search-input").focus()},addMultipleVal:function(e,a){var t=e.val();t instanceof Array||(t=[]),t.push(a),e.val(t)},removeMultipleVal:function(a,t){var n=a.val();n instanceof Array||(n=[]),n.splice(e.inArray(t,n),1),a.val(n)},updateClean:function(e){var a=e.data("selectMania-originalSelect");null!==a.val()&&a.val().length>0?e.find(".select-mania-clear-icon").show():e.find(".select-mania-clear-icon").hide()},doSearch:function(a){var t=a.data("selectMania-dropdown"),n=t.find(".select-mania-search-input").first().val().toLowerCase().trim();""!==n?(t.find(".select-mania-item").each(function(){-1!==e(this).text().toLowerCase().indexOf(n)?e(this).removeClass("select-mania-hidden"):e(this).addClass("select-mania-hidden")}),t.find(".select-mania-group").each(function(){e(this).find(".select-mania-item:not(.select-mania-hidden)").length>0?e(this).removeClass("select-mania-hidden"):e(this).addClass("select-mania-hidden")})):t.find(".select-mania-group, .select-mania-item").removeClass("select-mania-hidden")},doSearchAjax:function(e){var a=this,n=e.data("selectMania-dropdown").find(".select-mania-search-input").first().val();e.data("selectMania-ajaxReady",!1),e.data("selectMania-ajaxPage",1),a.dropdownLoading(e),e.data("selectMania-ajaxFunction")(n,1,e.data("selectMania-ajaxData"),function(n){a.dropdownLoading(e,!0),t.replaceItems(e,n),i.bind(e),a.initAjax(e)})},addItems:function(e,a){this.addOrReplaceItems(e,a,!1)},replaceItems:function(e,a){this.addOrReplaceItems(e,a,!0)},addOrReplaceItems:function(a,t,l){var s=a.data("selectMania-dropdown"),o=a.data("selectMania-originalSelect"),c=s.find(".select-mania-items"),d=e(t);this.getVal(a).forEach(function(a){d.filter(function(){return e(this).attr("value")===a.value&&e(this).text()===a.text}).prop("selected",!0)}),$builtItems=n.buildItemList(d),!0===l&&(o.find("option").remove(":not(:checked)"),c.empty()),c.append($builtItems),o.append(d),i.bind(a)},initAjax:function(e,a){"object"==typeof a&&(a.hasOwnProperty("ajax")&&"function"==typeof a.ajax&&e.data("selectMania-ajaxFunction",a.ajax),a.hasOwnProperty("data")&&"object"==typeof a.data&&e.data("selectMania-ajaxData",a.data)),e.data("selectMania-ajaxPage",1),e.data("selectMania-ajaxReady",!0),e.data("selectMania-ajaxScrollDone",!1)},dropdownLoading:function(a,t){var n=!1;void 0!==t&&!0===t&&(n=!0);var i=a.find(".select-mania-items-container").first();if(i.find(".icon-loading-container").remove(),!0!==n){var l=e('<div class="icon-loading-container"></div>');l.append('<i class="icon-loading"></i>'),i.append(l)}},getVal:function(a){var t=[];return a.find(".select-mania-value").each(function(){var a=e(this).find(".select-mania-value-text").first().text();t.push({value:e(this).attr("data-value"),text:a})}),t},clear:function(e){var a=e.data("selectMania-dropdown");e.find(".select-mania-value").remove(),a.find(".select-mania-item").removeClass("select-mania-selected");var t=e.data("selectMania-originalSelect");e.is(".select-mania-multiple")?t.val([]):t.val("")},setVal:function(a,t){var n=this,l=a.data("selectMania-originalSelect");n.clear(a),t.length>1&&!a.is(".select-mania-multiple")&&(t=t.slice(0,1)),t.forEach(function(t){var i=e.extend({value:"",text:"",selected:!0},t);n.setOneValSelectMania(a,i),n.setOneValOriginal(l,i)}),n.updateClean(a),i.bind(a)},setOneValSelectMania:function(a,t){var i=n.buildValue(t);a.find(".select-mania-values").append(i);var l=a.find('.select-mania-item[data-value="'+t.value+'"]').filter(function(){return e(this).text()===t.text});l.length>0&&l.first().addClass("select-mania-selected")},setOneValOriginal:function(a,t){var i=a.find('option[value="'+t.value+'"]').filter(function(){return e(this).text()===t.text});if(i.length<1){var l=n.buildOption(t);a.append(l)}else{i.first()[0].selected=!0}},controlTarget:function(a,t){return-1===e.inArray("isSelect",t)||a.is("select")?-1===e.inArray("isInitialized",t)||a.hasClass("select-mania-original")?-1!==e.inArray("notInitialized",t)&&a.hasClass("select-mania-original")?(console.error("selectMania | ignore because already initialized"),console.log(a[0]),!1):!(-1!==e.inArray("isSingle",t)&&a.length>1)||(console.error("selectMania | check method can be called on single element only"),console.log(a[0]),!1):(console.error("selectMania | select is not initialized"),console.log(a[0]),!1):(console.error("selectMania | invalid select element"),console.log(a[0]),!1)},controlSettings:function(a,t){return!1!==t.ajax&&"function"!=typeof t.ajax?(t.ajax=!1,console.error("selectMania | invalid ajax function"),console.log(a[0]),console.log(t),!1):-1===e.inArray(t.size,["tiny","small","medium","large"])?(t.size="medium",console.error("selectMania | invalid size"),console.log(a[0]),console.log(t),!1):null!==t.scrollContainer&&e(t.scrollContainer).length<1?(t.scrollContainer=null,console.error("selectMania | invalid scroll container"),console.log(a[0]),console.log(t),!1):!(null!==t.zIndex&&(isNaN(parseInt(t.zIndex))||!isFinite(t.zIndex)))||(t.zIndex=null,console.error("selectMania | invalid z-index"),console.log(a[0]),console.log(t),!1)},controlValues:function(e,a){return a instanceof Array||(console.error("selectMania | values parameter is not a valid array"),console.log(e[0]),console.log(a),!1)},navigateItem:function(a,t){var n=a.closest(".select-mania"),i=a.find(".select-mania-items"),l=".select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden)";n.hasClass("select-mania-multiple")&&(l+=":not(.select-mania-selected)");var s=a.find(l),o=a.find(l+".select-mania-hover"),c=e();if(o.length>0?"next"===t?c=s.slice(s.index(o)+1).first():"previous"===t&&(c=s.slice(0,s.index(o)).last()):c=s.first(),c.length>0){a.find(".select-mania-item").removeClass("select-mania-hover"),c.addClass("select-mania-hover");var d=c.position(),r=c.outerHeight(!0),u=i.height(),m=i.scrollTop();d.top<0?i.scrollTop(m+d.top):d.top+r>u&&i.scrollTop(m+d.top+r-u)}}},n={build:function(a,t){var n="select-mania-"+t.size,i='style="width:'+t.width+';"',l=e('<div class="select-mania '+n+'" '+i+"></div>");t.multiple&&l.addClass("select-mania-multiple"),t.disabled&&l.addClass("select-mania-disabled"),t.themes instanceof Array&&t.themes.length>0&&t.themes.forEach(function(e){l.addClass("select-mania-theme-"+e)}),!1!==t.ajax&&l.addClass("select-mania-ajax"),null!==t.scrollContainer&&l.attr("data-selectMania-scrollContainer",t.scrollContainer);var s=this.buildInner(t),o=this.buildDropdown(a,t);return l.append(s).append(o),l.data("selectMania-dropdown",o),o.data("selectMania-element",l),!0===t.hidden&&l.addClass("select-mania-hidden"),l},buildInner:function(a){var t=this,n=e('<div class="select-mania-inner"></div>'),i=e('<div class="select-mania-values"></div>'),l=e('<div class="select-mania-placeholder">'+a.placeholder+"</div>");i.append(l),a.values.forEach(function(e){i.append(t.buildValue(e))}),n.append(i);var s=e('<div class="select-mania-clear"></div>');return(a.removable||a.multiple)&&s.append('<i class="select-mania-clear-icon icon-cross">'),n.append(s),n.append(e('<div class="select-mania-arrow"><i class="select-mania-arrow-icon icon-arrow-down"></i></div>')),n},buildValue:function(a){var t='<div class="select-mania-value" data-value="'+a.value+'"><div class="select-mania-value-text">'+a.text+'</div><div class="select-mania-value-clear"><i class="select-mania-value-clear-icon icon-cross"></i></div></div>';return e(t)},buildOption:function(a){var t=e('<option value="'+a.value+'">'+a.text+"</option>");return t[0].selected=a.selected,t},buildDropdown:function(a,t){var n="select-mania-"+t.size,i=e('<div class="select-mania-dropdown '+n+'"></div>');if(t.multiple&&i.addClass("select-mania-multiple"),t.search){var l=e('<div class="select-mania-dropdown-search"></div>');l.append('<input class="select-mania-search-input" />'),i.append(l)}var s=e('<div class="select-mania-items-container"></div>'),o=e('<div class="select-mania-items"></div>');return o.append(this.buildItemList(a.children())),s.append(o),i.append(s),t.themes instanceof Array&&t.themes.length>0&&t.themes.forEach(function(e){i.addClass("select-mania-theme-"+e)}),null!==t.zIndex&&i.css("z-index",t.zIndex),i},buildItemList:function(a){var t=this,n=e();return a.each(function(){e(this).is("optgroup")?n=n.add(t.buildItemGroup(e(this))):e(this).is("option")&&(n=n.add(t.buildItem(e(this))))}),n},buildItemGroup:function(a){var t=this,n=e('<div class="select-mania-group"></div>'),i=e('<div class="select-mania-group-inner"></div>'),l=e('<div class="select-mania-group-title"></div>');a.is("[data-icon]")&&l.append('<div class="select-mania-group-icon"><i class="'+a.attr("data-icon")+'"></i></div>'),l.append('<div class="select-mania-group-text">'+a.attr("label")+"</div>"),n.append(l);var s=a.is(":disabled");return s&&n.addClass("select-mania-disabled"),a.find("option").each(function(){i.append(t.buildItem(e(this),s))}),n.append(i),n},buildItem:function(a,t){var n=a[0],i=e('<div class="select-mania-item" data-value="'+n.value+'"></div>');return a.is("[data-icon]")&&i.append('<div class="select-mania-item-icon"><i class="'+a.attr("data-icon")+'"></i></div>'),i.append('<div class="select-mania-item-text">'+n.text+"</div>"),(a.is(":disabled")||!0===l.def(t))&&i.addClass("select-mania-disabled"),a.is(":selected")&&i.addClass("select-mania-selected"),i}},i={bind:function(a){var t=this,n=a.data("selectMania-originalSelect"),i=a.data("selectMania-dropdown");a.is(".select-mania-disabled")?(n.off("focus.selectMania"),n.off("blur.selectMania"),a.find(".select-mania-clear-icon").off("click.selectMania"),a.find(".select-mania-value-clear-icon").off("click.selectMania"),a.find(".select-mania-inner").off("click.selectMania"),i.find(".select-mania-item:not(.select-mania-disabled)").off("mouseenter.selectMania"),i.find(".select-mania-item:not(.select-mania-disabled)").off("click.selectMania"),i.find(".select-mania-search-input").off("input.selectMania"),i.find(".select-mania-items").off("wheel.selectMania"),i.find(".select-mania-items").off("scroll.selectMania")):(e(document).off("click.selectMania").on("click.selectMania",t.documentClick),n.off("focus.selectMania").on("focus.selectMania",t.focus),n.off("blur.selectMania").on("blur.selectMania",t.blur),a.find(".select-mania-clear-icon").off("click.selectMania").on("click.selectMania",t.clearValues),a.find(".select-mania-value-clear-icon").off("click.selectMania").on("click.selectMania",t.clearValue),a.find(".select-mania-inner").off("click.selectMania").on("click.selectMania",t.dropdownToggle),i.find(".select-mania-item:not(.select-mania-disabled)").off("mouseenter.selectMania").on("mouseenter.selectMania",t.hoverItem),i.find(".select-mania-item:not(.select-mania-disabled)").off("click.selectMania").on("click.selectMania",t.itemSelection),i.find(".select-mania-search-input").off("input.selectMania").on("input.selectMania",t.inputSearch),i.find(".select-mania-items").off("wheel.selectMania").on("wheel.selectMania",t.scrollControl),a.is(".select-mania-ajax")&&i.find(".select-mania-items").off("scroll.selectMania").on("scroll.selectMania",t.scrollAjax))},dropdownToggle:function(a){a.stopPropagation();var n=e(this).closest(".select-mania").data("selectMania-dropdown");n.is(".open")?t.closeDropdown(n):(t.closeDropdown(e(".select-mania-dropdown.open")),t.openDropdown(n))},documentClick:function(a){e(a.target).closest(".select-mania-dropdown").length<1&&t.closeDropdown(e(".select-mania-dropdown.open"))},clearValues:function(a){a.stopPropagation();var n=e(this).closest(".select-mania"),i=n.data("selectMania-dropdown"),l=n.data("selectMania-originalSelect");t.clear(n),i.is(".select-mania-absolute")&&t.positionDropdown(i),l.trigger("change"),t.updateClean(n)},clearValue:function(a){a.stopPropagation();var n=e(this).closest(".select-mania"),i=n.data("selectMania-dropdown"),l=e(this).closest(".select-mania-value");i.find('.select-mania-item[data-value="'+l.attr("data-value")+'"]').removeClass("select-mania-selected"),l.remove();var s=n.data("selectMania-originalSelect");t.removeMultipleVal(s,l.attr("data-value")),i.is(".select-mania-absolute")&&t.positionDropdown(i),s.trigger("change"),t.updateClean(n)},itemSelection:function(){var a=e(this);t.selectItem(a)},inputSearch:function(){var a=e(this);$selectManiaEl=a.closest(".select-mania-dropdown").data("selectMania-element");var n=200;$selectManiaEl.is(".select-mania-ajax")&&(n=400),clearTimeout(a.data("selectMania-searchTimer")),a.data("selectMania-searchTimer",setTimeout(function(){$selectManiaEl.is(".select-mania-ajax")?t.doSearchAjax($selectManiaEl):t.doSearch($selectManiaEl)},n))},scrollAjax:function(a){var n=e(this),l=n.closest(".select-mania-dropdown").data("selectMania-element");if(!0!==l.data("selectMania-ajaxScrollDone")&&n.scrollTop()>=n[0].scrollHeight-n.outerHeight()-12&&!0===l.data("selectMania-ajaxReady")){var s=l.data("selectMania-ajaxPage")+1,o=l.find(".select-mania-search-input").first().val();l.data("selectMania-ajaxReady",!1),l.data("selectMania-ajaxPage",s),t.dropdownLoading(l),l.data("selectMania-ajaxFunction")(o,s,l.data("selectMania-ajaxData"),function(e){t.dropdownLoading(l,!0),""!==e.trim()?(t.addItems(l,e),i.bind(l),l.data("selectMania-ajaxReady",!0)):l.data("selectMania-ajaxScrollDone",!0)})}},scrollControl:function(a){var t=e(this);return a.originalEvent.deltaY<0?t.scrollTop()>0:t.scrollTop()+t.innerHeight()<t[0].scrollHeight},focus:function(a){var t=e(this);t.data("selectMania-element").addClass("select-mania-focused"),t.off("keydown.selectMania").on("keydown.selectMania",i.keyboardOpening)},blur:function(a){var t=e(this);t.data("selectMania-element").removeClass("select-mania-focused"),t.off("keydown.selectMania")},hoverItem:function(a){var t=e(this);t.closest(".select-mania-dropdown").find(".select-mania-item").removeClass("select-mania-hover"),t.addClass("select-mania-hover")},keyboardOpening:function(a){var n=e(this),i=n.data("selectMania-element").data("selectMania-dropdown");i.hasClass("open")||-1===e.inArray(a.keyCode,[13,32,37,38,39,40])||(a.preventDefault(),a.stopPropagation(),n.blur(),t.openDropdown(i))},keyboardControl:function(a){var n=e(".select-mania-dropdown.open").first();if(n.length>0&&-1!==e.inArray(a.keyCode,[9,13,27,38,40]))switch(a.preventDefault(),a.stopPropagation(),a.keyCode){case 13:var i=n.find(".select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden).select-mania-hover").first();i.length>0&&t.selectItem(i);break;case 9:case 27:t.closeDropdown(n);break;case 38:t.navigateItem(n,"previous");break;case 40:t.navigateItem(n,"next")}}},l={def:function(e){return void 0===e?null:e}},s={init:function(n){var i=e.extend(!0,{},a.defaults,n);return this.each(function(){var a=e(this);t.controlTarget(a,["isSelect","notInitialized"])&&t.initialize(a,i)})},update:function(){return this.each(function(){var a=e(this);t.controlTarget(a,["isInitialized"])&&t.update(a)})},destroy:function(){return this.each(function(){var a=e(this);t.controlTarget(a,["isInitialized"])&&t.destroy(a)})},check:function(){if(t.controlTarget(this,["isSingle"]))return this.hasClass("select-mania-original")},get:function(){if(t.controlTarget(this,["isSingle","isInitialized"])){var e=this.data("selectMania-element");return t.getVal(e)}},set:function(e){if(t.controlTarget(this,["isSingle","isInitialized"])&&t.controlValues(this,e)){var a=this.data("selectMania-element");t.setVal(a,e)}},clear:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var n=a.data("selectMania-element");t.clear(n),a.trigger("change"),t.updateClean(n)}})},open:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var n=a.data("selectMania-element").data("selectMania-dropdown");t.openDropdown(n)}})},close:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var n=a.data("selectMania-element").data("selectMania-dropdown");t.closeDropdown(n)}})},hide:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var n=a.data("selectMania-element"),i=n.data("selectMania-dropdown");t.closeDropdown(i),n.addClass("select-mania-hidden")}})},show:function(){return this.each(function(){var a=e(this);t.controlTarget(a,["isInitialized"])&&a.data("selectMania-element").removeClass("select-mania-hidden")})},setup:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var n=a.data("selectMania-element");t.clear(n),a.trigger("change"),t.updateClean(n)}})}};e.fn.selectMania=function(e){if(!(this.length<1)){if(s[e]){var a=Array.prototype.slice.call(arguments,1);return s[e].apply(this,a)}if("object"==typeof e||!e)return s.init.apply(this,arguments);console.error("selectMania | wrong method called"),console.log(this)}},e.extend({selectManiaSetup:function(e){a.setup(e)}})}(jQuery);