/*! select-mania v0.8.8 */
!function(e){var a={defaults:{width:"100%",size:"medium",themes:[],placeholder:"Select an item",removable:!1,search:!1,ajax:!1,data:{}}},t={initialize:function(e,a){var t=this,l=t.getData(e,a);if(t.controlData(e,l,["ajax","size"])){var s=i.build(l);s.data("selectMania-originalSelect",e),e.data("selectMania-element",s),!1!==l.ajax&&t.initAjax(s,l),t.updateClean(s),e.addClass("select-mania-original"),s.insertBefore(e),n.bind(s)}},destroy:function(e){$selectManiaEl=e.data("selectMania-element"),$selectManiaEl.remove(),e.removeClass("select-mania-original")},getData:function(a,t){var i=this,n={multiple:!1,values:[],items:[]};n.multiple=a.is("[multiple]"),a.find("option").each(function(){this.selected&&n.values.push({value:this.value,text:this.text}),n.items.push({value:this.value,text:this.text,selected:this.selected})}),n=e.extend(n,t);var l=i.getAttrData(a);return n=e.extend(n,l)},getAttrData:function(e){var a={};return["width","size","placeholder","removable","search"].forEach(function(t){if(e.is("[data-"+t+"]")){var i=e.attr("data-"+t);"true"!==i&&"false"!==i||(i="true"===i),a[t]=i}}),a},openDropdown:function(e){var a=this;e.stop().addClass("open").slideDown(100),a.focusSearch(e)},closeDropdown:function(e){e.stop().removeClass("open").slideUp(100)},focusSearch:function(e){e.find(".select-mania-dropdown-search-input").focus()},addMultipleVal:function(e,a){var t=e.val();t instanceof Array||(t=[]),t.push(a),e.val(t)},removeMultipleVal:function(a,t){var i=a.val();i instanceof Array||(i=[]),i.splice(e.inArray(t,i),1),a.val(i)},updateClean:function(e){var a=e.data("selectMania-originalSelect");null!==a.val()&&a.val().length>0?e.find(".select-mania-clear-icon").show():e.find(".select-mania-clear-icon").hide()},doSearch:function(a){var t=a.find(".select-mania-dropdown-search-input").first().val();""!==(t=t.toLowerCase().trim())?a.find(".select-mania-dropdown-item").each(function(){-1!==e(this).text().toLowerCase().indexOf(t)?e(this).removeClass("select-mania-hidden"):e(this).addClass("select-mania-hidden")}):a.find(".select-mania-dropdown-item").removeClass("select-mania-hidden")},doSearchAjax:function(e){var a=this,i=e.find(".select-mania-dropdown-search-input").first().val();e.data("selectMania-ajaxReady",!1),e.data("selectMania-ajaxPage",1),a.dropdownLoading(e),e.data("selectMania-ajaxFunction")(i,1,e.data("selectMania-ajaxData"),function(i){a.dropdownLoading(e,!0),t.replaceItems(e,i),n.bind(e),a.initAjax(e)})},addItems:function(e,a){this.addOrReplaceItems(e,a,!1)},replaceItems:function(e,a){this.addOrReplaceItems(e,a,!0)},addOrReplaceItems:function(a,t,l){var s=a.data("selectMania-originalSelect"),c=a.find(".select-mania-dropdown-items"),o=e(t).filter("option"),r=[];a.is(".select-mania-multiple")?r=s.val():r.push(s.val()),$builtItems=e(),o.each(function(){-1!==e.inArray(this.value,r)&&(this.selected=!0);var a=i.buildItem({value:this.value,text:this.text,selected:this.selected});$builtItems=$builtItems.add(a)}),!0===l&&(s.find("option").remove(":not(:checked)"),c.empty()),c.append($builtItems),s.append(o),n.bind(a)},initAjax:function(e,a){"object"==typeof a&&(a.hasOwnProperty("ajax")&&"function"==typeof a.ajax&&e.data("selectMania-ajaxFunction",a.ajax),a.hasOwnProperty("data")&&"object"==typeof a.data&&e.data("selectMania-ajaxData",a.data)),e.data("selectMania-ajaxPage",1),e.data("selectMania-ajaxReady",!0),e.data("selectMania-ajaxScrollDone",!1)},dropdownLoading:function(a,t){var i=!1;if(void 0!==t&&!0===t&&(i=!0),$dropdownContainer=a.find(".select-mania-dropdown-items-container").first(),$dropdownContainer.find(".icon-loading-container").remove(),!0!==i){var n=e('<div class="icon-loading-container"></div>');n.append('<i class="icon-loading"></i>'),$dropdownContainer.append(n)}},getVal:function(a){var t=[];return a.find(".select-mania-value").each(function(){var a=e(this).find(".select-mania-value-text").first().text();t.push({value:e(this).attr("data-value"),text:a})}),t},clear:function(e){e.find(".select-mania-values .select-mania-value").remove(),e.find(".select-mania-dropdown-item").removeClass("select-mania-selected");var a=e.data("selectMania-originalSelect");e.is(".select-mania-multiple")?a.val([]):a.val("")},setVal:function(a,t){var i=this,l=a.data("selectMania-originalSelect");i.clear(a),t.length>1&&!a.is(".select-mania-multiple")&&(t=t.slice(0,1)),t.forEach(function(t){var n=e.extend({value:"",text:"",selected:!0},t);i.setOneValSelectMania(a,n),i.setOneValOriginal(l,n)}),i.updateClean(a),n.bind(a)},setOneValSelectMania:function(a,t){var n=i.buildValue(t);a.find(".select-mania-values").append(n);var l=a.find('.select-mania-dropdown-item[data-value="'+t.value+'"]').filter(function(){return e(this).text()===t.text});l.length>0&&l.first().addClass("select-mania-selected")},setOneValOriginal:function(a,t){var n=a.find('option[value="'+t.value+'"]').filter(function(){return e(this).text()===t.text});if(n.length<1){var l=i.buildOption(t);a.append(l)}else n.first()[0].selected=!0},controlTarget:function(a,t){return-1===e.inArray("isSelect",t)||a.is("select")?-1===e.inArray("isInitialized",t)||a.hasClass("select-mania-original")?-1!==e.inArray("notInitialized",t)&&a.hasClass("select-mania-original")?(console.error("selectMania | ignore because already initialized"),console.log(a[0]),!1):!(-1!==e.inArray("isSingle",t)&&a.length>1)||(console.error("selectMania | check method can be called on single element only"),console.log(a[0]),!1):(console.error("selectMania | select is not initialized"),console.log(a[0]),!1):(console.error("selectMania | not a valid select element"),console.log(a[0]),!1)},controlData:function(a,t,i){return-1!==e.inArray("ajax",i)&&!1!==t.ajax&&"function"!=typeof t.ajax?(t.ajax=!1,console.error("selectMania | not a valid ajax function"),console.log(a[0]),console.log(t),!1):-1===e.inArray("size",i)||-1!==e.inArray(t.size,["small","medium","large"])||(t.size="medium",console.error("selectMania | not a valid size"),console.log(a[0]),console.log(t),!1)},controlValues:function(e,a){return a instanceof Array||(console.error("selectMania | values parameter is not a valid array"),console.log(e[0]),console.log(a),!1)}},i={build:function(a){var t=this,i="select-mania-"+a.size,n='style="width:'+a.width+';"',l=e('<div class="select-mania '+i+'" '+n+"></div>");return a.multiple&&l.addClass("select-mania-multiple"),a.themes instanceof Array&&a.themes.length>0&&a.themes.forEach(function(e){l.addClass("select-mania-theme-"+e)}),!1!==a.ajax&&l.addClass("select-mania-ajax"),l.append(t.buildInner(a)).append(t.buildDropdown(a)),l},buildInner:function(a){var t=this,i=e('<div class="select-mania-inner"></div>'),n=e('<div class="select-mania-values"></div>'),l=e('<div class="select-mania-placeholder">'+a.placeholder+"</div>");n.append(l),a.values.forEach(function(e){n.append(t.buildValue(e))}),i.append(n);var s=e('<div class="select-mania-clear"></div>');return(a.removable||a.multiple)&&s.append('<i class="select-mania-clear-icon icon-cross">'),i.append(s),i.append(e('<div class="select-mania-arrow"><i class="select-mania-arrow-icon icon-arrow-down"></i></div>')),i},buildValue:function(a){var t='<div class="select-mania-value" data-value="'+a.value+'"><div class="select-mania-value-text">'+a.text+'</div><div class="select-mania-value-clear"><i class="select-mania-value-clear-icon icon-cross"></i></div></div>';return e(t)},buildOption:function(a){var t=e('<option value="'+a.value+'">'+a.text+"</option>");return t[0].selected=a.selected,t},buildDropdown:function(a){var t=this,i=e('<div class="select-mania-dropdown"></div>');if(a.search){var n=e('<div class="select-mania-dropdown-search"></div>');n.append('<input class="select-mania-dropdown-search-input" />'),i.append(n)}var l=e('<div class="select-mania-dropdown-items-container"></div>'),s=e('<div class="select-mania-dropdown-items"></div>');return a.items.forEach(function(e){s.append(t.buildItem(e))}),l.append(s),i.append(l),i},buildItem:function(a){var t=e('<div class="select-mania-dropdown-item" data-value="'+a.value+'">'+a.text+"</div>");return a.selected&&t.addClass("select-mania-selected"),t}},n={bind:function(a){var t=this;e(document).off("click.selectMania").on("click.selectMania",t.documentClick),a.find(".select-mania-clear-icon").off("click.selectMania").on("click.selectMania",t.clearValues),a.find(".select-mania-value-clear-icon").off("click.selectMania").on("click.selectMania",t.clearValue),a.find(".select-mania-inner").off("click.selectMania").on("click.selectMania",t.dropdownToggle),a.find(".select-mania-dropdown-item").off("click.selectMania").on("click.selectMania",t.selectItem),a.find(".select-mania-dropdown-search-input").off("input.selectMania").on("input.selectMania",t.inputSearch),a.find(".select-mania-dropdown-items").off("wheel.selectMania").on("wheel.selectMania",t.scrollControl),a.is(".select-mania-ajax")&&a.find(".select-mania-dropdown-items").off("scroll.selectMania").on("scroll.selectMania",t.scrollAjax)},dropdownToggle:function(){var a=e(this).closest(".select-mania").find(".select-mania-dropdown").first();a.is(".open")?t.closeDropdown(a):t.openDropdown(a)},documentClick:function(a){if(e(a.target).closest(".select-mania").length>0){var i=e(a.target).closest(".select-mania"),n=e(".select-mania").not(i).find(".select-mania-dropdown.open");t.closeDropdown(n)}else t.closeDropdown(e(".select-mania-dropdown.open"))},clearValues:function(a){a.stopPropagation();var i=e(this).closest(".select-mania"),n=i.data("selectMania-originalSelect");t.clear(i),n.trigger("change"),t.updateClean(i)},clearValue:function(a){a.stopPropagation();var i=e(this).closest(".select-mania"),n=e(this).closest(".select-mania-value");i.find('.select-mania-dropdown-item[data-value="'+n.attr("data-value")+'"]').removeClass("select-mania-selected"),n.remove();var l=i.data("selectMania-originalSelect");t.removeMultipleVal(l,n.attr("data-value")),l.trigger("change"),t.updateClean(i)},selectItem:function(){var a=e(this).closest(".select-mania"),l=a.data("selectMania-originalSelect");if(!e(this).is(".select-mania-selected")){var s=e(this).attr("data-value"),c=i.buildValue({value:s,text:e(this).text()});a.is(".select-mania-multiple")?(a.find(".select-mania-values").append(c),t.addMultipleVal(l,s)):(a.find(".select-mania-dropdown-item").removeClass("select-mania-selected"),a.find(".select-mania-values .select-mania-value").remove(),a.find(".select-mania-values").append(c),l.val(s)),e(this).addClass("select-mania-selected"),l.trigger("change")}a.is(".select-mania-multiple")||t.closeDropdown(a.find(".select-mania-dropdown")),t.updateClean(a),n.bind(a)},inputSearch:function(){$selectManiaEl=e(this).closest(".select-mania");var a=200;$selectManiaEl.is(".select-mania-ajax")&&(a=400),clearTimeout(e(this).data("selectMania-searchTimer")),e(this).data("selectMania-searchTimer",setTimeout(function(){$selectManiaEl.is(".select-mania-ajax")?t.doSearchAjax($selectManiaEl):t.doSearch($selectManiaEl)},a))},scrollAjax:function(a){var i=e(this),l=i.closest(".select-mania");if(!0!==l.data("selectMania-ajaxScrollDone")&&i.scrollTop()>=i[0].scrollHeight-i.outerHeight()-12&&!0===l.data("selectMania-ajaxReady")){var s=l.data("selectMania-ajaxPage")+1,c=l.find(".select-mania-dropdown-search-input").first().val();l.data("selectMania-ajaxReady",!1),l.data("selectMania-ajaxPage",s),t.dropdownLoading(l),l.data("selectMania-ajaxFunction")(c,s,l.data("selectMania-ajaxData"),function(e){t.dropdownLoading(l,!0),""!==e.trim()?(t.addItems(l,e),n.bind(l),l.data("selectMania-ajaxReady",!0)):l.data("selectMania-ajaxScrollDone",!0)})}},scrollControl:function(a){var t=e(this);return a.originalEvent.deltaY<0?t.scrollTop()>0:t.scrollTop()+t.innerHeight()<t[0].scrollHeight}},l={init:function(i){var n=e.extend(a.defaults,i);return this.each(function(){var a=e(this);t.controlTarget(a,["isSelect","notInitialized"])&&t.initialize(a,n)})},destroy:function(){return this.each(function(){var a=e(this);t.controlTarget(a,["isInitialized"])&&t.destroy(a)})},check:function(){if(t.controlTarget(this,["isSingle"]))return this.hasClass("select-mania-original")},get:function(){if(t.controlTarget(this,["isSingle","isInitialized"])){var e=this.data("selectMania-element");return t.getVal(e)}},set:function(e){if(t.controlTarget(this,["isSingle","isInitialized"])&&t.controlValues(this,e)){var a=this.data("selectMania-element");t.setVal(a,e)}},clear:function(){return this.each(function(){var a=e(this);if(t.controlTarget(a,["isInitialized"])){var i=a.data("selectMania-element");t.clear(i),a.trigger("change"),t.updateClean(i)}})}};e.fn.selectMania=function(e){if(!(this.length<1)){if(l[e]){var a=Array.prototype.slice.call(arguments,1);return l[e].apply(this,a)}if("object"==typeof e||!e)return l.init.apply(this,arguments);console.error("selectMania | wrong method called"),console.log(this)}}}(jQuery);